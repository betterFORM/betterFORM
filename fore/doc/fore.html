<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<style>
@import "styles/fore.css";

    body {
  font-family: Helvetica, arial, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: white;
  padding: 30px; }

body > *:first-child {
  margin-top: 0 !important; }
body > *:last-child {
  margin-bottom: 0 !important; }

a {
  color: #4183C4; }
a.absent {
  color: #cc0000; }
a.anchor {
  display: block;
  padding-left: 30px;
  margin-left: -30px;
  cursor: pointer;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0; }

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
  cursor: text;
  position: relative; }

h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
  text-decoration: none; }

h1 tt, h1 code {
  font-size: inherit; }

h2 tt, h2 code {
  font-size: inherit; }

h3 tt, h3 code {
  font-size: inherit; }

h4 tt, h4 code {
  font-size: inherit; }

h5 tt, h5 code {
  font-size: inherit; }

h6 tt, h6 code {
  font-size: inherit; }

h1 {
  font-size: 28px;
  color: black; }

h2 {
  font-size: 24px;
  border-bottom: 1px solid #cccccc;
  color: black; }

h3 {
  font-size: 18px; }

h4 {
  font-size: 16px; }

h5 {
  font-size: 14px; }

h6 {
  color: #777777;
  font-size: 14px; }

p, blockquote, ul, ol, dl, li, table, pre {
  margin: 15px 0; }

hr {
  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;
  border: 0 none;
  color: #cccccc;
  height: 4px;
  padding: 0;
}

body > h2:first-child {
  margin-top: 0;
  padding-top: 0; }
body > h1:first-child {
  margin-top: 0;
  padding-top: 0; }
  body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
  margin-top: 0;
  padding-top: 0; }

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0; }

h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
  margin-top: 0; }

li p.first {
  display: inline-block; }
li {
  margin: 0; }
ul, ol {
  padding-left: 30px; }

ul :first-child, ol :first-child {
  margin-top: 0; }

dl {
  padding: 0; }
  dl dt {
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin: 15px 0 5px; }
    dl dt:first-child {
      padding: 0; }
    dl dt > :first-child {
      margin-top: 0; }
    dl dt > :last-child {
      margin-bottom: 0; }
  dl dd {
    margin: 0 0 15px;
    padding: 0 15px; }
    dl dd > :first-child {
      margin-top: 0; }
    dl dd > :last-child {
      margin-bottom: 0; }

blockquote {
  border-left: 4px solid #dddddd;
  padding: 0 15px;
  color: #777777; }
  blockquote > :first-child {
    margin-top: 0; }
  blockquote > :last-child {
    margin-bottom: 0; }

table {
  padding: 0;border-collapse: collapse; }
  table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0; }
    table tr:nth-child(2n) {
      background-color: #f8f8f8; }
    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      text-align: left;
      margin: 0;
      padding: 6px 13px; }
    table tr td {
      border: 1px solid #cccccc;
      text-align: left;
      margin: 0;
      padding: 6px 13px; }
    table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }

img {
  max-width: 100%; }

span.frame {
  display: block;
  overflow: hidden; }
  span.frame > span {
    border: 1px solid #dddddd;
    display: block;
    float: left;
    overflow: hidden;
    margin: 13px 0 0;
    padding: 7px;
    width: auto; }
  span.frame span img {
    display: block;
    float: left; }
  span.frame span span {
    clear: both;
    color: #333333;
    display: block;
    padding: 5px 0 0; }
span.align-center {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-center > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: center; }
  span.align-center span img {
    margin: 0 auto;
    text-align: center; }
span.align-right {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-right > span {
    display: block;
    overflow: hidden;
    margin: 13px 0 0;
    text-align: right; }
  span.align-right span img {
    margin: 0;
    text-align: right; }
span.float-left {
  display: block;
  margin-right: 13px;
  overflow: hidden;
  float: left; }
  span.float-left span {
    margin: 13px 0 0; }
span.float-right {
  display: block;
  margin-left: 13px;
  overflow: hidden;
  float: right; }
  span.float-right > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: right; }

code, tt {
  margin: 0 2px;
  padding: 0 5px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px; }

pre code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent; }

.highlight pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }

pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }
  pre code, pre tt {
    background-color: transparent;
    border: none; }

@media screen and (min-width: 914px) {
    body {
        width: 854px;
        margin:0 auto;
    }
}
@media print {
	table, pre {
		page-break-inside: avoid;
	}
}
</style>
<title>Fore - XForms for HTML reloaded</title>

</head>
<body>
<h1>Fore - XForms for HTML reloaded</h1>

<h3>Green Paper 26. Nov 2013</h3>

<p>Version: 1.0</p>

<p>Editors:</p>

<ul>
<li>Joern Turner</li>
</ul>


<p>Copyright betterFORM 2013</p>

<h1>Preface - what's a 'Green Paper'?</h1>

<p>A 'Green Paper' according to the definition of the European Commission is a document:</p>

<blockquote><p>(...) to stimulate discussion on given topics(...). They invite the relevant parties (bodies or individuals) to participate in a consultation process and debate on the basis of the proposals they put forward. Green Papers may give rise to (...) developments that are then outlined in White Papers.</p></blockquote>

<p>So keep in mind - this is a proposal AND subject to change.</p>

<h1>Abstract</h1>

<p>This paper presents 'Fore' - a successor of the (unfortunately stalled) <a href="http://www.w3.org/TR/XForms-for-HTML">XForms for HTML</a> Working Draft dated from 19 December 2008. It outlines an opinionated approach<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup> of evolving the orginal approach into todays' HTML5 ecosystem.</p>

<p>Cite from original document:</p>

<blockquote><p>XForms for HTML provides a set of attributes and script methods that can be used by the tags or elements of an HTML or XHTML web page to simplify the integration of data-intensive interactive processing capabilities from XForms. The semantics of the attributes are mapped to the rich XForms model-view-controller-connector architecture, thereby allowing web application authors a smoother, selective migration path to the higher-order behaviors available from the full element markup available in modules of XForms.</p></blockquote>

<h1>Motivation</h1>

<p>The W3C XForms 1.1 recommendation has set the standard for the next generation of forms on the web. However with its steep learning curve and the perception of being bound exclusively to the XML world it lacks broad acceptence<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>.</p>

<p>As a reaction XForms for HTML was drafted to more closely meet the skills and expectations of HTML or Web developers<sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup> and naturally enhance HTML with (limited) XForms capabilities.</p>

<p>Unfortunately XForms for HTML was discontinued<sup id="fnref:4"><a href="#fn:4" rel="footnote">4</a></sup> and HTML5 has not addressed the functional gap. While typing and some declarative enhancements esp. to the Ã¬nput`element have been made there's still a lack for e.g. a repeat model or a data binding mechanism (except in detail areas).</p>

<p>Fore is an attempt to revive the spirit of XForms for HTML while staying as close to (existing and evolving) web standards as possible and finally offer a advanced form processing platform in HTML.</p>

<p>But why not simply implement XForms for HTML but have another spec? X4H is dated back to 2008 before the mobile revolution has really taken speed. The web platform and associated tooling has evolved quite a bit during the past 5 years requiring appropriate answers for the new challenges.</p>

<p>It is unlikely that native support for XForms for HTML will come from any browser vendor. The solution is to provide a JavaScript-driven implementation that builds upon the extensibility features of HTML5 (namely extension elements).</p>

<h1>Relation to other work</h1>

<p>The evolving W3C <a href="http://www.w3.org/TR/components-intro/">Web Components</a> specification is an ideal candidate for the implementation of Fore. It offers a HTML5-based component model for extending common HTML elements to create new custom elements which enhance the original element.</p>

<p><a href="http://polymer-project.org">Polymer</a> is an polyfill by Google implementing Web Components. It implements large parts of the specification in JavaScript polyfilling browsers that do not yet support a feature natively. Google and Netscape mainly drive the initiative now but major companies begin to adapt Web Components so there's a chance of native support for most major browsers.</p>

<h2>Introduction</h2>

<p>The goals of Fore are fully in sync with the ones given in <a href="http://www.w3.org/TR/XForms-for-HTML/#intro-reading">XForms for HTML</a>. A final implementation should feel as simple, intuitive and consistent with widespread standards as possible and must allow developers to turn existing HTML forms into production-grade, model-driven form applications.</p>

<p>In addition Fore will take the mobile world into account which has evolved dramatically since 2008 and forces to address new requirements such as offline-capability, touch events, push notifications and responsive layout.</p>

<p>Starting with a simple and fully client-side approach the goal is to connect Fore to the full XForms capabilities defined by XForms 1.1. Fore intends to allow an iterative appraoch to form applications which start with simple HTML forms with implied models and allow developers to switch to an explicit model with advanced capabilities on the go. Further it shall address the requirements of production-grade applications by providing transparent validation on client and server.</p>

<h3>Conventions</h3>

<p>When referring to original XForms elements the prefix 'xf' is used to imply that the respective element is from the XForms namespace.</p>

<p>Extension (or custom) elements in the Web Components spec must use a name with a dash ('-') character in its name. For Fore elements the prefix 'fore-' will be used.</p>

<h2>Approach</h2>

<p>This paper is not a specification in the strict sense. It just tries to outline the functionality to a reasonable extend to give users a clear impression of what to expect from the implementation.</p>

<p>Some decisions about the implementation have already been taken (e.g. to use Polymer) so it's not specifying things in an technology-agnostic way but will make use of work done elsewhere. For instance the Web Components Specification is still under construction and likely things will change here in detail. Where possible these changes will be shielded away by the implementation. However this might not always be possible and users will probably need to change details of their already running forms to catch up with the ongoing development. So we're on the bleeding edge - you have been warned.</p>

<p>As developers (as opposed to spec writers) we are taking a pragmatic approach to get things running. This means that not each and every edge case might get considered in full detail or at all. But we're addicted to standards and will try to align our decisions with common practices and standards whereever possible.</p>

<p>As already mentioned Fore is an attempt to revive and modernize XForms for HTML and as such we'll work along the existing draft but will rephrase most of the text trying to catch the spirit of it but making it more consumable for the reader.</p>

<h2>XForms as component</h2>

<p>HTML5 allows to extend the native DOM through extension elements. The only requirement for extension elements is that the name must contain a dash ('-') character (e.g. my-element).</p>

<p>The Web Components standard provides a set of technologies that build on top of extension elements and allow to specify custom element behavior and rendering in an encapsulated fashion.</p>

<p>Fore will use Web Components to implement the functionality of X4H and give web developers access to the rich processing model of XForms. The syntax is considered an important factor for the acceptance of the solution and must meet the expectations of the developers and re-use existing HTML syntax whereever possible and appropriate.</p>

<h3>Syntax</h3>

<p>X4H mainly uses attributes on existing HTML elements to add its functionality. This however is not possible for the XForms model which has no correspondence in HTML.</p>

<h3>Avoid requiring XML namespaces</h3>

<p>XML Namespaces are often considered an entry hurdle for Web developers not familiar with XML. To keep the syntax easy Fore will not use XML-namespaced elements within its DOM at runtime. It will be able to consume those though.</p>

<h2>Models in forms</h2>

<p>Fore will support these different ways of using an XForms model.</p>

<p>todo: say some more about usage of models</p>

<h3>Importing a model</h3>

<p><code>&lt;form model-src="myXFormsModel.xml"&gt;</code></p>

<p>myXFormsModel.xml must contain fully XForms 1.1 conformant markup and will be resolved relative to <code>document.location.href</code></p>

<p>If the URL contains a fragment identifier (#) it will be resolved as idref in context of the current document.</p>

<p>By using linked models the host document no longer needs to be well-formed and namespaced XHTML.</p>

<p><a href="examples/linked-model.html">full example</a></p>

<h3>Using an inline model</h3>

<p>To use an inline XForms model the containing document must be XHTML and declare the appropriate namespaces. The model can be referenced by a fragment identifier:</p>

<pre><code>&lt;xf:model id="myModel"&gt;

    ...
&lt;/xf:model&gt;

&lt;form model-src="#myModel"&gt;
...
&lt;/form&gt;
</code></pre>

<p><a href="examples/inline-model.html">full example</a></p>

<h3>Implicit model</h3>

<p>If a form does not have a <code>model-src</code> attribute, the an implicit 'xf-model' element is generated and prepended before the first child element of the form element. The generated <code>&lt;xf:model&gt;</code> element is required as it is used by the XForms processor as the target of model events.</p>

<p>Example:</p>

<pre><code>&lt;form&gt;
    &lt;label for="title"&gt;Title&lt;/label&gt;
    &lt;select id="title" name="title"&gt;
        &lt;option value="dr"&gt;Dr&lt;/option&gt;
        &lt;option value="prof"&gt;Prof&lt;/option&gt;
        &lt;option value="dipling"&gt;Dipl.-Ing.&lt;/option&gt;
     &lt;/select&gt;

     &lt;label for="firstName"&gt;First Name&lt;/label&gt;
     &lt;input id="firstName" type="text" name="firstname"&gt;

&lt;/form&gt;
</code></pre>

<p>The above input form will create the following implicit model at runtime:</p>

<pre><code>&lt;form&gt;
    &lt;xf-model&gt;
        &lt;xf-instance&gt;
            &lt;data&gt;
                &lt;title&gt;&lt;/title&gt;
                &lt;firstname&gt;&lt;/firstname&gt;
            &lt;/data&gt;
        &lt;/xf-instance&gt;
    &lt;/xf-model&gt;

    &lt;label for="title"&gt;Title&lt;/label&gt;
    &lt;select id="title" name="title"&gt;
        &lt;option value="dr"&gt;Dr&lt;/option&gt;
        &lt;option value="prof"&gt;Prof&lt;/option&gt;
        &lt;option value="dipling"&gt;Dipl.-Ing.&lt;/option&gt;
     &lt;/select&gt;

     &lt;label for="firstName"&gt;First Name&lt;/label&gt;
     &lt;input id="firstName" type="text" name="firstname"&gt;

&lt;/form&gt;
</code></pre>

<h2>Data instances</h2>

<p>XForms uses XML and the XPath data model for representing instance data while JSON has established as a de-facto standard in the web development world. Fore will support both data models.</p>

<p>Instances can either be explicitly given as part of an <code>xf:model</code> or generated based upon the element structure of the UI controls. The latter are called <strong>generated data instances</strong>.</p>

<p>A model might use an arbitrary amount of instances being associated with a single form.</p>

<p>The default instance is indicated by the <code>instance</code> attribute of element <code>form</code>. The value of the <code>instance</code> attribute must match the <code>id</code> attribute of an existing instance.</p>

<p>If the <code>instance</code> attribute is absent, a default instance will be generated based upon the  <code>name</code> attributes that appear on elements enclosed by the given <code>form</code>. The generated instance will be inserted as first child of the associated <code>model</code>. Generated instances will be constructed before actual model initialization takes place during 'xforms-model-construct` event.</p>

<h3>Instance data generation</h3>

<p>The structure of generated instances is determined by the structure of elements bearing <code>name</code> attributes that are enclosed by a <code>form</code> element.</p>

<h4>XML instance generation</h4>

<p>Given this markup:</p>

<pre><code>&lt;form model-src="#address" name="address"&gt;

    &lt;label for="firstName"&gt;First Name&lt;/label&gt;
    &lt;input id="firstName" type="text" name="firstname"&gt;

    &lt;label for="lastName"&gt;Last Name&lt;/label&gt;
    &lt;input id="lastName" type="text" name="lastname"&gt;

    &lt;div name="postaladdress"&gt;
        &lt;label for="street"&gt;Street&lt;/label&gt;
        &lt;input id="street" name="street"/&gt;
    &lt;/div&gt;
&lt;/form&gt;
</code></pre>

<p>the following instance is created:</p>

<pre><code>&lt;address&gt;
    &lt;firstname&gt;&lt;/firstname&gt;
    &lt;lastname&gt;&lt;/lastname&gt;
    &lt;postaladdress&gt;
        &lt;street&gt;&lt;/street&gt;
    &lt;/postaladdress&gt;
&lt;/address&gt;            
</code></pre>

<p>If a <code>name</code> attribute on element <code>form</code> is not present the value will default to "data".</p>

<h4>JSON instance generation</h4>

<p>If JSON is used the same example above would result in this JSON structure:</p>

<pre><code>&lt;form&gt;
    &lt;xf-model&gt;
        &lt;script type="text/javascript"&gt;
            var address = {
                title:null,
                firstname:null
            };
        &lt;/script&gt;
    &lt;/xf-model&gt;
&lt;/form&gt;
</code></pre>

<h3>Using HTML attributes in instance generation</h3>

<p>HTML attributes are used to provide default values during instance generation. The following table gives an overview of the attributes used:</p>

<table>
<thead>
<tr>
<th>Attribute    </th>
<th> Content Model  </th>
<th> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>instance     </td>
<td> IDREF or empty </td>
<td> May exclusively be used on <code>form</code> elements to identify the default instance of a form. If present must point to an instance with given ID which will be used as the default instance for that form. If not present an instance will be generated for the form.</td>
</tr>
<tr>
<td>name         </td>
<td> xsd:QName      </td>
<td> The HTML <code>name</code> attribute is used to bind a control to a data node that matches this attributes value. E.g. when <code>name="foo"</code> the control will bind to a data node named "foo".</td>
</tr>
<tr>
<td>value        </td>
<td> xsd:string     </td>
<td> If attribute <code>value</code> is present on a form control it will set the default value of the bound data node given by the <code>name</code>attribute.</td>
</tr>
<tr>
<td>checked      </td>
<td> <code>true</code>, <code>checked</code> or <code>false</code> </td>
<td> If attribute <code>checked</code>is present on a given form control it will be interpreted as a value of <code>true</code>. If not present or <code>false</code> the value of the bound instance node will be <code>false</code>.</td>
</tr>
<tr>
<td>type </td>
<td></td>
<td></td>
</tr>
</tbody>
</table>


<h3>Precedence of HTML attributes</h3>

<p>tbd: define order of precedence when HTML attributes are used with an explicit xf:model</p>

<h2>Binding data</h2>

<p>tbd</p>

<p><strong>Editorial Note</strong>: in later versions of this Spec it is planned to allow complex path expressions that contain steps and filters.</p>

<h3>Declarative validation</h3>

<p>tbd.</p>

<h3>Declarative calculation</h3>

<p>tbd.</p>

<h3>handling of the <code>readonly</code> attribute</h3>

<p>tbd.</p>

<h3>Evaluation of expressions</h3>

<p>tbd.</p>

<h2>Submissions</h2>

<p>tbd</p>

<h2>Repeated data sets</h2>

<p><strong>Editorial Note</strong>: this section needs review!</p>

<p>Repeated data nodes are handled according to the upcoming HTML template specification.</p>

<p>E.g.</p>

<pre><code>&lt;xf-instance&gt;
    &lt;data&gt;
        &lt;items&gt;
            &lt;item&gt;Item one&lt;/item&gt;
            &lt;item&gt;Item two&lt;/item&gt;
            &lt;item&gt;Item three&lt;/item&gt;
        &lt;/items&gt;
    &lt;/data&gt;
&lt;xf-instance&gt;
...

&lt;form&gt;
    &lt;template id="repeatedItems" repeat="items"&gt;
        &lt;input name="item" type="text"&gt;
    &lt;/template&gt;
&lt;/form&gt;
</code></pre>

<p>will create the following DOM tree at runtime:</p>

<pre><code>&lt;form&gt;
    &lt;input name="item" type="text" value="Item one"&gt;
    &lt;input name="item" type="text" value="Item two"&gt;
    &lt;input name="item" type="text" value="Item three"&gt;
&lt;/form&gt;
</code></pre>

<h2>JavaScript API</h2>

<p>tbd</p>

<h2>Overview of HTML enhancements</h2>

<p>This section describes the additional attributes provided by Fore to enhance native HTML behavior.</p>

<p>Two controls that share the same name (specifiy the same value for the <code>name</code>attribute) they are bound to the same data node. If the bound data node changes all bound controls will be updated to reflect the new value.</p>

<h3>General enhancements</h3>

<table>
<thead>
<tr>
<th>Attribute    </th>
<th> Content Model  </th>
<th> may appear on </th>
<th> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>name    </td>
<td> xsd:QName            </td>
<td> any HTML element in the <code>body</code> <strong>Editorial Note:</strong> we should be more specific here. </td>
<td> A parameter name binding to an instance node</td>
</tr>
</tbody>
</table>


<h3>Enhancements to the <code>form</code>element</h3>

<table>
<thead>
<tr>
<th>Attribute    </th>
<th> Content Model  </th>
<th> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>model-src    </td>
<td> URL            </td>
<td> URL pointing to external XForms model</td>
</tr>
<tr>
<td>instance     </td>
<td> IDREF          </td>
<td> indicates the default instance of a form</td>
</tr>
</tbody>
</table>


<h3>Enhancements to HTML controls</h3>

<table>
<thead>
<tr>
<th>Attribute    </th>
<th> Content Model  </th>
<th> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>constraint   </td>
<td> XPath or JavaScript expression </td>
<td> Expression that must evaluate to boolean indicating whether or not data bound the control are valid. The expression of this attribute is automatically re-evaluated whenever any of the data values is depends upon are changing.</td>
</tr>
<tr>
<td>required     </td>
<td> XPath or JavaScript expression or <code>true</code>, <code>false</code> (case-insensitive) </td>
<td> Expression that must evaluate to boolean indicating whether or not the bound data value MUST provide a value. In HTML the presence of this attribute indicates a boolean <code>true</code>value while the non-existence indicates a boolean <code>false</code>value.</td>
</tr>
<tr>
<td>type </td>
<td> xsd:string </td>
<td> String denoting an HTML datatype (e.g. 'number') or an XSD datatype</td>
</tr>
</tbody>
</table>


<h3>Enhancements to the <code>label</code>element</h3>

<p>Fore maps <code>xf:label</code>, <code>xf:alert</code>, <code>xf:hint</code> and <code>xf:help</code>to the HTML <code>label</code>element to attach their specific behavior.</p>

<table>
<thead>
<tr>
<th>Attribute    </th>
<th> Content Model  </th>
<th> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>for </td>
<td> IDREF pointing to control </td>
<td> same meaning as in HTML - associates the label with a control.</td>
</tr>
<tr>
<td>is </td>
<td> One of 'xf-label', 'xf-alert', 'xf-hint' or 'xf-help'</td>
<td> Identifies Web Component to be used and is resolved by HTML imports module</td>
</tr>
<tr>
<td>class </td>
<td> One of 'xfLabel', 'xfAlert', 'xfHint' or 'xf:help' </td>
<td> Alternative way of marking the respective semantics for rendering purposes. Does NOT create the a web component but acts as a mere convention for CSS matching.</td>
</tr>
</tbody>
</table>


<h3>Mapping of datatypes</h3>

<p>HTML defines a set of values for the <code>type</code>attribute of a control. Some of these can be mapped to XML Schema datatypes or XForms datatypes for ease of authoring and validation.</p>

<table>
<thead>
<tr>
<th>HTML type value </th>
<th> XSD datatype </th>
<th> Remarks</th>
</tr>
</thead>
<tbody>
<tr>
<td>button </td>
<td> no match </td>
<td> -</td>
</tr>
<tr>
<td>checkbox </td>
<td> xsd:boolean </td>
<td> As checkbox is used to input boolean values it can be mapped to xsd:boolean</td>
</tr>
<tr>
<td>color </td>
<td> no match </td>
<td> There's no direct correspondence to a XML schema datatype. However it would be possible to define an extension from xsd:string that validates correct color values</td>
</tr>
<tr>
<td>date </td>
<td> xsd:date </td>
<td> <strong>Editorial Note</strong>: exact representation and the role of language-specific formats must be clarified</td>
</tr>
<tr>
<td>datetime </td>
<td> xsd:dateTime </td>
<td> <strong>Editorial Note</strong>: same issues as above apply</td>
</tr>
<tr>
<td>datetime-local </td>
<td> no-match </td>
<td> <strong>Editorial Note</strong>: there's no direct match but automatic conversion might be possible when language is defined in the context of the document or form</td>
</tr>
<tr>
<td>email </td>
<td>  xf:email </td>
<td> XForms defines an email datatype which can be used for mapping.</td>
</tr>
<tr>
<td>file </td>
<td> xsd:base64Binary or xsd:hexBinary or xsd:anyURI </td>
<td> <strong>Editorial Note</strong>: as multiple mappings would be possible it will probably be necessary to define an additional mechanism to choose from these options. Most of the time users will expect a binary fileupload that ends up in some server location.</td>
</tr>
<tr>
<td>hidden </td>
<td> no match </td>
<td> <strong>Editorial Note</strong>: there's no sensible mapping for hidden controls</td>
</tr>
<tr>
<td>image </td>
<td> no match </td>
<td> Is used for presentational purposes in HTML. Does not imply any datatype mapping.</td>
</tr>
<tr>
<td>month </td>
<td> xsd:gMonth </td>
<td> -</td>
</tr>
<tr>
<td>number </td>
<td> xsd:integer or xsd:decimal or xsd:double or xsd:float </td>
<td> tbd.</td>
</tr>
<tr>
<td>password </td>
<td> no match </td>
<td> Used for presentational purposes in HTML.</td>
</tr>
<tr>
<td>radio </td>
<td> no match </td>
<td> <strong>Editorial Note</strong>: in implied mode it might be possible to generate an enumeration type to validate that one of the options is used.</td>
</tr>
<tr>
<td>range </td>
<td> no match </td>
<td> <strong>Editorial Note</strong>: in XForms the <code>xf:range</code>control can bind to different datatypes.</td>
</tr>
<tr>
<td>reset </td>
<td> no match </td>
<td> -</td>
</tr>
<tr>
<td>search </td>
<td> no match </td>
<td> Default to xf:string</td>
</tr>
<tr>
<td>submit </td>
<td> no match </td>
<td> -</td>
</tr>
<tr>
<td>tel </td>
<td> no match </td>
<td> <strong>Editorial Note</strong>: a regex pattern might be added to validate these values of the server side</td>
</tr>
<tr>
<td>text </td>
<td> xf:string </td>
<td> -</td>
</tr>
<tr>
<td>time </td>
<td> xf:time </td>
<td> -</td>
</tr>
<tr>
<td>url </td>
<td> xf:anyURI </td>
<td> -</td>
</tr>
<tr>
<td>week </td>
<td> no match </td>
<td> <strong>Editorial Note</strong>: a custom XML Schema datatype might be created.</td>
</tr>
</tbody>
</table>


<p><strong>Editorial Note:</strong></p>

<p>Might we want to support these elements in addition as attributes?</p>

<h1>Appendices</h1>

<h3>A Glossary of Terms</h3>

<h3>B Links</h3>

<ul>
<li><a href="http://www.w3.org/TR/2009/REC-xforms-20091020/">XForms 1.1</a></li>
<li><a href="http://www.w3.org/TR/XForms-for-HTML">XForms for HTML</a></li>
<li><a href="http://www.w3.org/TR/components-intro/">Web Components</a></li>
<li><a href="http://polymer-project.org">Polymer</a></li>
<li><a href="http://goessner.net/articles/JsonPath/">JSONPath - JavaScript implementation</a></li>
<li><a href="https://code.google.com/p/json-path/">json-path - Java implementation</a></li>
<li><a href="https://dvcs.w3.org/hg/webcomponents/raw-file/tip/spec/templates/index.html">HTML templates</a></li>
</ul>


<h3>C Acknowledgements</h3>

<hr />
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>This opinion is build on top of many years of experience as implementors and users of XForms and applying it in many different problem domains. <a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
<li id="fn:2">
<p>It&rsquo;s beyond the scope of this document to discuss all reasons for this lack of acceptence in detail. There are political, technical and sociological aspects but in general these have to do with XForms markup &lsquo;not feeling right at home&rsquo; within HTML documents.<a href="#fnref:2" rev="footnote">&#8617;</a></p></li>
<li id="fn:3">
<p>People that bring their knowledge of HTML writing, CSS and JavaScript.<a href="#fnref:3" rev="footnote">&#8617;</a></p></li>
<li id="fn:4">
<p>The author(s) have no further information about the reasons.<a href="#fnref:4" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

</body>
</html>