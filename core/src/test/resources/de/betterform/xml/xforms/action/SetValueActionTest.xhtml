<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Copyright (c) 2012. betterFORM Project - http://www.betterform.de
  ~ Licensed under the terms of BSD License
  -->

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:xf="http://www.w3.org/2002/xforms"
    xmlns:ev="http://www.w3.org/2001/xml-events">
    <head>
        <meta name="author" content="unl at users.sourceforge.net"/>
        <meta name="description" content="test form for setvalue action"/>
        <meta name="version" content="$Id: SetValueActionTest.xhtml 3456 2008-08-13 14:47:27Z joern $"/>
        <xf:model id="model-1">
            <xf:instance id="instance-1" xmlns="">
                <data>
                    <item>value</item>
                    <node>text</node>
                    <node2>text</node2>
                </data>
            </xf:instance>
            <xf:setvalue ev:event="xforms-model-construct-done" ref="node2" value="'foo'"/>
        </xf:model>
        <xf:model id="model-2">
            <xf:instance id="instance-2" xmlns="">
                <data>
                    <item>value</item>
                </data>
            </xf:instance>
            <xf:bind id="bind-item" nodeset="item"/>
        </xf:model>
    </head>
    <body>
        <xf:group>
            <xf:label>Setvalue variations</xf:label>
            <xf:input id="input-1" ref="item">
                <xf:label>Item (model 1)</xf:label>
            </xf:input>
            <xf:input id="input-2" bind="bind-item">
                <xf:label>Item (model 2)</xf:label>
            </xf:input>
            <xf:trigger id="trigger-string-literal">
                <xf:label>Set string literal value</xf:label>
                <xf:action>
                    <xf:setvalue ref="item">literal</xf:setvalue>
                </xf:action>
            </xf:trigger>
            <xf:trigger id="trigger-number-literal">
                <xf:label>Set number literal value</xf:label>
                <xf:action>
                    <xf:setvalue ref="item">42</xf:setvalue>
                </xf:action>
            </xf:trigger>
            <xf:trigger id="trigger-string-expression">
                <xf:label>Set string expression value</xf:label>
                <xf:action>
                    <xf:setvalue ref="item" value="concat('ex', 'press', 'ion')"/>
                </xf:action>
            </xf:trigger>
            <xf:trigger id="trigger-integer-expression">
                <xf:label>Set integer expression value</xf:label>
                <xf:action>
                    <xf:setvalue ref="item" value="42 + 0"/>
                </xf:action>
            </xf:trigger>
            <xf:trigger id="trigger-fraction-expression">
                <xf:label>Set fraction expression value</xf:label>
                <xf:action>
                    <xf:setvalue ref="item" value="42 div 5"/>
                </xf:action>
            </xf:trigger>
            <xf:trigger id="trigger-nan-expression">
                <xf:label>Set NaN expression value</xf:label>
                <xf:action>
                    <xf:setvalue ref="item" value="42 div ."/>
                </xf:action>
            </xf:trigger>
            <xf:trigger id="trigger-nodeset-expression">
                <xf:label>Set nodeset expression value</xf:label>
                <xf:action>
                    <xf:setvalue ref="item" value="../node"/>
                </xf:action>
            </xf:trigger>
            <xf:trigger id="trigger-empty-nodeset-expression">
                <xf:label>Set empty nodeset expression value</xf:label>
                <xf:action>
                    <xf:setvalue ref="item" value="non-exisiting"/>
                </xf:action>
            </xf:trigger>
            <xf:trigger id="trigger-invalid-expression">
                <xf:label>Set invalid expression value</xf:label>
                <xf:action>
                    <xf:setvalue ref="item" value="!ยง$%/()"/>
                </xf:action>
            </xf:trigger>
            <xf:trigger id="trigger-value-missing">
                <xf:label>Set value without a value attribute or a literal value</xf:label>
                <xf:action>
                    <xf:setvalue ref="item"/>
                </xf:action>
            </xf:trigger>
            <xf:trigger id="trigger-value-precedence">
                <xf:label>Set value with both a value attribute and a literal value</xf:label>
                <xf:action>
                    <xf:setvalue ref="item" value="'precedence'">literal</xf:setvalue>
                </xf:action>
            </xf:trigger>
            <xf:trigger id="trigger-empty-nodeset-binding">
                <xf:label>Set value with an empty nodeset binding</xf:label>
                <xf:action>
                    <xf:setvalue ref="non-existing" value="'test'"/>
                </xf:action>
            </xf:trigger>
            <xf:trigger id="trigger-foreign-model">
                <xf:label>Set value in different model</xf:label>
                <xf:action>
                    <xf:setvalue model="model-2" ref="item" value="'test'"/>
                </xf:action>
            </xf:trigger>
            <xf:trigger id="trigger-foreign-model-bind">
                <xf:label>Set value in different model (model binding)</xf:label>
                <xf:action>
                    <xf:setvalue bind="bind-item" value="'test'"/>
                </xf:action>
            </xf:trigger>
        </xf:group>
    </body>
</html>
